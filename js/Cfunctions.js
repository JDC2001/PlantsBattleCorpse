var $User=function(){var e=navigator.platform,o=navigator.userAgent,t="Win32"==e||"Windows"==e,n="Mac68K"==e||"MacPPC"==e||"Macintosh"==e,i="X11"==e&&!t&&!n,a=t||n||i,l=!(!window.attachEvent||window.opera),r=l&&!window.XMLHttpRequest,d="http:"==location.protocol.toLowerCase()?1:0;return $Random=d?"#":"?",innerText=l?function(e,o){e.innerText=o}:function(e,o){e.textContent=o},r?(document.execCommand("BackgroundImageCache",!1,!0),ShadowPNG=""):ShadowPNG="images/interface/plantshadow32.png",{Browser:{IE:l,IE6:r,IE9:l&&o.indexOf("MSIE 9.0")>0,Opera:!!window.opera,WebKit:o.indexOf("AppleWebKit/")>-1,Gecko:o.indexOf("Gecko")>-1&&-1==o.indexOf("KHTML")},Server:{List:[[]],SpeedURL:"",DataURL:"",SpeedInx:0,DataInx:0,ErrNum:0},HTML5:!!document.createElement("canvas").getContext,System:{Win:t,Mac:n,Unix:i},Client:{PC:a,Mobile:!a},HTTP:d,AuthorWebsite:"",isAuthorWebsite:!1,Visitor:{UserName:"",UserAuthority:0,Progress:1,SelectServerT:0,NowStep:1,TimeStep:10,SaveLvl:1,SaveLvlCallBack:null}}}(),oSym={Init:function(e,o){this.Now=0,this.Timer=this.execTask=null,this.TQ=[{T:0,f:e,ar:o||[]}],this.NowStep=1,this.TimeStep=10,this.Start()},Clear:function(){this.TQ.length=0},Start:function(){null==this.Timer&&(function(){var e=oSym;try{e.Now+=e.NowStep}catch(e){alert("超时退出游戏"),location.reload()}e.Timer=setTimeout(arguments.callee,e.TimeStep)}(),function(){for(var e,o,t=oSym,n=t.TQ,i=n.length;i--;)t.Now>=(e=n[i]).T&&((o=e.f).apply(o,e.ar),t.removeTask(i));t.execTask=setTimeout(arguments.callee,t.TimeStep)}())},Stop:function(){clearTimeout(oSym.Timer),clearTimeout(oSym.execTask),oSym.Timer=null,oSym.execTask=null},addTask:function(e,o,t){var n=this.TQ;return n[n.length]={T:this.Now+e,f:o,ar:t},this},removeTask:function(e){return this.TQ.splice(e,1),this}},oS={W:880,H:600,C:9,LawnMowerX:70,Lvl:0,GlobalVariables:{},LvlVariables:{},SelfVariables:[],LvlClearFunc:null,Init:function(e,o,t,n){var i,a=window;if(e.LoadMusic?(PlayMusic(e.LoadMusic),NewAudio({source:"Look up at the Sky",loop:!0})):PlayMusic(e.LoadMusic="Look up at the Sky"),t!=n)for(i in t)a[i]!=n?(this.GlobalVariables[i]=a[i],a[i]=t[i]):this.LvlVariables[i]=a[i]=t[i];ArCard=[],ArPCard=[],ArSun=[],$Pn=[],$Z=[],$P=[],EDAll=$("dAll"),EDPZ=$("dPZ"),EDAlloffsetLeft=EDAll.offsetLeft,EDNewAll=EDAll.cloneNode(!0),EDNewFlagMeter=$("dFlagMeter").cloneNode(!0),ESSunNum=$("sSunNum"),this.AudioArr=[],this.MustAllReady=!0,this.LoadAccess=null,this.InitLawnMower=null,this.StartGame=null,this.ChoseCard=this.MPID="",this.PicNum=this.AccessNum=this.MCID=this.Chose=0,this.Monitor=null,this.UserDefinedFlagFunc=null,this.SunNum=n,this.BrainsNum=n,this.HaveFog=0;for(i in e)this.SelfVariables.push(i),this[i]=e[i];$User.isAuthorWebsite&&0!=oS.LevelEName&&(ClearChild($("JSPVZAjax")),NewEle("JSPVZAjax","script",0,{src:$User.Server.DataURL+"asp/SaveUserPosition.asp?l="+escape(oS.LevelName),type:"text/javascript"},document.body)),!this.PicArr&&(this.PicArr=[]),!this.PName&&(this.PName=[]),!this.ZName&&(this.ZName=[]),!this.backgroundImage&&(this.backgroundImage="images/interface/background1.jpg"),!this.LF&&(this.LF=[0,1,1,1,1,1]),!this.ZF&&(this.ZF=this.LF),!this.LargeWaveFlag&&(this.LargeWaveFlag={}),!this.StartGameMusic&&(this.StartGameMusic="UraniwaNi"),this.ArCard=this.CardKind==n?e.PName:e.ZName,this.SunNum==n&&(this.SunNum=50),this.CanSelectCard==n&&(this.CanSelectCard=1),this.DKind==n&&(this.DKind=1),this.StaticCard==n&&(this.StaticCard=1),this.ShowScroll==n&&(this.ShowScroll=!0),this.ProduceSun==n&&(this.ProduceSun=!0),this.Coord==n&&(this.Coord=1),oCoord[this.Coord](),oP.Init(o),oT.Init(this.R),oZ.Init(this.R),oGd.Init(),this.LoadTips(),this.LoadProgress()},LoadTips:function(){var e=[""];NewEle("dTips","div","position:absolute;color:#fff;top:450px;width:100%;text-align:center;font-size:16px","",EDAll).innerHTML='<span style="font-weight:bold"></span><span>'+e[Math.floor(Math.random()*e.length)]+"</span>"},LoadProgress:function(e,o,t,n,i){SetVisible($("dFlagMeter")),SetHidden($("imgGQJC"));var a,l=oS,r=[],d=l.PicArr,u=l.PName,s=l.ZName,c=0,p=GetX(11),S=(oGd.$LF,oGd.$ZF),f=oS.R+1,h=($("sFlagMeterTitleF"),$("dFlagMeterTitle")),m=l.LoadImage,g=l.CheckImg;l.InitPn;switch(NewImg(0,"images/interface/brain.png","",$Pn.oBrains=NewEle(0,"div","position:absolute")),l.Coord){case 2:NewImg(0,"images/interface/PoolCleaner.png","",$Pn.oPoolCleaner=NewEle(0,"div","position:absolute"));case 1:NewImg(0,"images/interface/LawnCleaner.png","",$Pn.oLawnCleaner=NewEle(0,"div","position:absolute"))}for(;e--;)if(t=(o=u[e].prototype).PicArr.slice(0),Array.prototype.push.apply(d,t),$User.HTML5)for(i=(n=o.AudioArr).length;i--;)NewAudio({source:n[i]});for(e in oS.LargeWaveFlag){s[s.length]=oS.FlagZombie||oFlagZombie;break}for(e=s.length;e--;){if(Array.prototype.push.apply(d,(o=(a=s[e]).prototype).PicArr.slice(0)),$User.HTML5)for(i=(n=o.AudioArr).length;i--;)NewAudio({source:n[i]});o.Init.call(a,p,o,S,f)}for(l.PicNum=c+=d.length,e=d.length,h.setAttribute("title",""),h.style.cursor="pointer",h.onclick=function(){oS.MustAllReady=!1,oS.LoadReady(oS)};e--;)m(d[e],g);e=r.length,oS.LoadAudio()},LoadAudio:$User.HTML5?function(){for(var e=oS.AudioArr,o=e.length;o--;)NewAudio({source:e[o]})}:function(){},InitPn:function(e){var o=$Pn[e[0]]=NewEle(0,"div","position:absolute");NewImg(0,ShadowPNG,e[2],o),NewImg(0,e[1],"",o),oS.CheckImg()},LoadImage:$User.Browser.IE?function(e,o,t){var n=new Image;n.onreadystatechange=function(){"complete"==n.readyState&&o(t,1)},n.onerror=function(){n.onreadystatechange=null,n.title=e,o(t,0)},n.src=e}:function(e,o,t){var n=new Image;n.src=e,n.complete?o(t,1):(n.onload=function(){n.complete&&o(t,1)},n.onerror=function(){n.title=e,o(t,0)})},LoadScript:$User.Browser.IE?function(e,o,t,n,i){var a=NewEle(e,"script",0,{type:"text/javascript"});a.onreadystatechange=function(){("loaded"==a.readyState||"complete"==a.readyState)&&(a.onreadystatechange=null,t(i,1))},a.onerror=function(){a.onreadystatechange=null,t(i,0)},a.src=o,n.appendChild(a)}:function(e,o,t,n,i){var a=NewEle(e,"script",0,{type:"text/javascript"});a.onload=function(){t(i,1)},a.onerror=function(){t(i,0)},a.src=o,n.appendChild(a)},CheckImg:function(e,o){var t=oS;t.AccessNum>t.PicNum||!t.MustAllReady||(e=139-140*t.AccessNum++/t.PicNum-11,$("imgFlagHead").style.left=e+"px",$("sFlagMeterTitleF").innerHTML='<span style="cursor:pointer;font-family:Yahei Mono;color:#fff">loading...('+t.AccessNum+"/"+t.PicNum+")</span>",$("imgFlagMeterFull").style.clip="rect(0,auto,21px,"+(e+11)+"px)",t.AccessNum==t.PicNum&&(oS.Lvl,t.MustAllReady&&t.LoadReady(t)))},LoadReady:function(e){var o=$("dFlagMeterTitle");if(null!=o.onclick){ClearChild($("dTips")),oSym.NowStep=$User.Visitor.NowStep,oSym.TimeStep=$User.Visitor.TimeStep,o.onclick=null,o.title=null,o.style.cursor="default",SetHidden($("dFlagMeterContent"),dFlagMeter),$("dFlagMeter").style.top="545px",$("sFlagMeterTitleF").innerHTML=$("dFlagMeterTitleB").innerHTML=e.LevelName,$("imgFlagHead").style.left="139px",$("imgFlagMeterFull").style.clip="rect(0,auto,auto,157px)",delete e.PicArr,delete e.Coord,delete e.LF,delete e.ZF;var t={background:"url("+e.backgroundImage+") no-repeat",visibility:"visible"};!e.ShowScroll&&(t.left="-115px"),SetStyle($("tGround"),t),$("tGround").innerHTML=oS.GifHTML;var n=function(e){var o=oS;$User.Visitor;NewImg("imgGrowSoil","images/interface/GrowSoil.gif","visibility:hidden;z-index:50",EDAll),NewImg("imgGrowSpray","images/interface/GrowSpray.gif","visibility:hidden;z-index:50",EDAll),NewEle("dTitle","div",0,0,$("dBody")),innerText(ESSunNum,o.SunNum),InitPCard(),o.ShowScroll?oSym.addTask(void 0==e?200:e,function(e){ClearChild(e),o.ScrollScreen()},[NewEle("DivParty","div","line-height:50px;color:#FFFFFF;font-size:50px;font-family:方正少儿简体",{},EDAll)]):(SetVisible($("dMenu")),AutoSelectCard(),LetsGO())};e.LoadAccess?e.LoadAccess(n):n()}},ScrollScreen:function(){(EDAll.scrollLeft+=25)<500?oSym.addTask(2,arguments.callee,[]):(DisplayZombie(),SetVisible($("dMenu")),oS.CanSelectCard?SetVisible($("dTop"),$("dSelectCard"),$("dCardList")):(AutoSelectCard(),oSym.addTask(200,oS.ScrollBack,[LetsGO])))},ScrollBack:function(e){SetHidden($("dZombie"),$("dSelectCard"),$("dTitle"),$("dCardList")),$("tGround").style.left="-115px",$("dZombie").innerHTML="",function(e){var o=EDAll.scrollLeft;(o-=25)>0?(EDAll.scrollLeft=o,oSym.addTask(2,arguments.callee,[e])):(EDAll.scrollLeft=0,e())}(e)}},oCoord={1:function(){oS.R=5,ChosePlantX=function(e){return Compare(GetC(e),1,oS.C,GetX)},ChosePlantY=function(e){return $SSml(e,[86,181,281,386,476],[[75,0],[175,1],[270,2],[380,3],[470,4],[575,5]])},GetC=function(e){return $SSml(e,[-50,100,140,220,295,379,460,540,625,695,775,855,935],[-2,-1,0,1,2,3,4,5,6,7,8,9,10,11])},GetR=function(e){return $SSml(e,[86,181,281,386,476],[0,1,2,3,4,5])},GetX=function(e){return $SEql(e,{"-2":-50,"-1":100,0:140,1:187,2:267,3:347,4:427,5:507,6:587,7:667,8:747,9:827,10:865,11:950})},GetY=function(e){return $SEql(e,{0:75,1:175,2:270,3:380,4:470,5:575})},GetY1Y2=function(e){return $SEql(e,{0:[0,85],1:[86,180],2:[181,280],3:[281,385],4:[386,475],5:[476,600]})},GetX1X2=function(e){return $SEql(e,{"-2":[-100,-49],"-1":[-50,99],0:[100,139],1:[140,219],2:[220,294],3:[295,378],4:[379,459],5:[460,539],6:[540,624],7:[625,694],8:[695,774],9:[775,854],10:[855,934],11:[950,1030]})},!oS.InitLawnMower&&(oS.InitLawnMower=function(){for(var e=6;--e;)CustomSpecial(oLawnCleaner,e,-1)}),oS.GifHTML=""},2:function(){oS.R=6,ChosePlantX=function(e){return Compare(GetC(e),1,oS.C,GetX)},ChosePlantY=function(e){return $SSml(e,[86,171,264,368,440,532],[[75,0],[161,1],[254,2],[358,3],[430,4],[524,5],[593,6]])},GetC=function(e){return $SSml(e,[-50,100,140,220,295,379,460,540,625,695,775,855,935],[-2,-1,0,1,2,3,4,5,6,7,8,9,10,11])},GetR=function(e){return $SSml(e,[86,171,264,368,440,532],[0,1,2,3,4,5,6])},GetX=function(e){return $SEql(e,{"-2":-50,"-1":100,0:140,1:187,2:267,3:347,4:427,5:507,6:587,7:667,8:747,9:827,10:865,11:950})},GetY=function(e){return $SEql(e,{0:75,1:165,2:253,3:355,4:430,5:522,6:587})},GetY1Y2=function(e){return $SEql(e,{0:[0,85],1:[86,170],2:[171,263],3:[264,367],4:[368,439],5:[440,531],6:[532,600]})},GetX1X2=function(e){return $SEql(e,{"-2":[-100,-49],"-1":[-50,99],0:[100,139],1:[140,219],2:[220,294],3:[295,378],4:[379,459],5:[460,539],6:[540,624],7:[625,694],8:[695,774],9:[775,854],10:[855,934],11:[950,1030]})},!oS.InitLawnMower&&(oS.InitLawnMower=function(){CustomSpecial(oLawnCleaner,1,-1),CustomSpecial(oLawnCleaner,2,-1),CustomSpecial(oPoolCleaner,3,-1),CustomSpecial(oPoolCleaner,4,-1),CustomSpecial(oLawnCleaner,5,-1),CustomSpecial(oLawnCleaner,6,-1)}),oS.GifHTML='<img style="position:absolute;left:253px;top:278px" src="">',!oS.DKind&&oGd.MakeFog()}},oP={Init:function(e){var o=this;if(o.NumZombies=o.FlagZombies=0,e){var t;for(t in e)o[t]=e[t];if(e.AZ){var n,i,a,l,r,d,u,s,c,p={},S=[];for(o.ArZ=[],u=(n=o.AZ).sort(function(e,o){return e[2]-o[2]}).length;u--;){for(a=(c=n[u])[0],l=c[1],r=c[2];l--;)S.push([a,r]);if(d=c[3])for(s=d.length;s--;)p[i=d[s]]?p[i].push(a):p[i]=[a]}o.AZ=S,o.MustShowAtFlag=p}}e&&e.FlagNum?(o.FlagHeadStep=Math.floor(140/(e.FlagNum-1)),o.MonPrgs=function(){var e,o,t=oP,n=t.FlagZombies,i=$User.Visitor;!--t.NumZombies&&(n<t.FlagNum?(t.ReadyFlag=++n,oSym.addTask(500,t.FlagPrgs,[])):(t.FlagToEnd(),$User.isAuthorWebsite&&""!=$User.Visitor.UserName&&(ClearChild($("JSPVZAjax")),i.SaveLvl&&NewEle("JSPVZAjax","script",0,{},document.body)),i.SaveLvlCallBack&&i.SaveLvlCallBack({UserName:i.UserName,SunNum:oS.SunNum,Lvl:e,T:oSym.Now-oS.StartTime}),!isNaN(Math.floor(e))&&(o=$("dAdventure"),$User.Visitor.Progress=++e,o.firstChild.innerHTML=Math.ceil(e/10),o.childNodes[1].innerHTML=(e-=10*Math.floor(e/10))?e:e+1),NewEle("DivA","div","position:absolute;width:900px;height:600px;background:#FFF;filter:alpha(opacity=0);opacity:0;z-index:255",0,EDAll),PauseGame($("dMenu0"),1)))}):o.MonPrgs=function(){},(!e||!e.FlagToEnd)&&(o.FlagToEnd=function(){NewImg("imgSF","images/interface/trophy.png","left:417px;top:233px;z-index:255",EDAll,{onclick:function(){PlayAudio("winmusic"),SelectModal(0),HiddenOptions(),SetBlock($("dSurface"),$("iSurfaceBackground")),ShowNameDiv()}})})},AddZombiesFlag:function(e){var o,t=oP,n=oS.LargeWaveFlag,i=t.FlagHeadStep,a=t.FlagNum;SetVisible($("imgGQJC"),$("dFlagMeterContent"));for(o in n)Math.floor(o)<a?SetStyle(n[o],{visibility:"visible",left:150-(o-1)*i+"px"}):SetVisible(n[o]);PlayAudio("awooga"),$User.HTML5&&oSym.addTask(2e3,function(){[function(){PlayAudio(["groan1","groan2"][Math.floor(2*Math.random())])},function(){PlayAudio(["groan3","groan4"][Math.floor(2*Math.random())])},function(){PlayAudio(["groan5","groan6"][Math.floor(2*Math.random())])},function(){PlayAudio("groan1"),oSym.addTask(150,function(){PlayAudio("groan5")},[])},function(){PlayAudio("groan2"),oSym.addTask(150,function(){PlayAudio("groan6")},[])}][Math.floor(3*Math.random())](),oSym.addTask(2e3,arguments.callee,[])},[]),t.ReadyFlag=1,t.FlagPrgs(e)},SelectFlagZombie:function(e,o){for(var t,n,i,a,l=oP,r=l.ArZ,d=l.AZ,u=d.length,s=[],c=0,p=oS.LargeWaveFlag[o],S=!1,f=p?(PlayAudio("siren"),p.style.top="5px",--e,s[c++]=oS.FlagZombie||oFlagZombie,30):150,h=l.MustShowAtFlag;u--&&!((t=d[u])[1]>o);)r.push(t[0]),--d.length,S=!0;if(S&&r.sort(function(e,o){return e.prototype.Lvl-o.prototype.Lvl}),a=h[o])for(u=a.length;u--;)e-=(s[c++]=a[u]).prototype.Lvl;for(i=r[u=(n=r.length)-1].prototype.Lvl;e>0;){if(u&&i>e){for(;--u&&r[u].prototype.Lvl>e;);n=u+1,i=r[u].prototype.Lvl}e-=(s[c++]=r[Math.floor(Math.random()*n)]).prototype.Lvl}l.NumZombies+=c,l.SetTimeoutZombie(s,f)},SelectFlagZombie1:function(e){for(var o=oP,t=[],n=0,i=o.ArZ,a=oS.LargeWaveFlag[o.FlagZombies],l=o.SumToZombie,r=a?(a.style.top="5px",--e,t[n++]=oS.FlagZombie||oFlagZombie,30):150;e>0;)e-=(t[n++]=i[Math.floor(Math.random()*$SEql(e,l))]).prototype.Lvl;o.NumZombies+=n,o.SetTimeoutZombie(t,r)},SetTimeoutTomZombie:function(e){var o,t,n=[],i=[],a=0,l=e.length;for(o in oGd.$Tombstones)t=o.split("_"),i[a]=(n[a]=new(e[Math.floor(Math.random()*l)])).CustomBirth(t[0],t[1],100),++a;this.AppearUP(i,n,a)},SetTimeoutWaterZombie:function(e,o,t,n){for(var i,a=oGd.$LF,l=[],r=a.length,d=[],u=[],s=n.length,c=o-e+1;--r;)2==a[r]&&l.push(r);for(i=l.length,r=t;r--;)u[r]=(d[r]=new(n[Math.floor(Math.random()*s)])).CustomBirth(l[Math.floor(Math.random()*i)],Math.floor(e+Math.random()*c));this.AppearUP(u,d,t)},AppearUP:function(e,o,t){oP.NumZombies+=t,asyncInnerHTML(e.join(""),function(e,o){EDPZ.appendChild(e);for(var t,n,i=o.length;i--;)(t=o[i]).Birth.call(t),SetBlock(t.Ele),oSym.addTask(10,function(e,o,t,n){o=Math.max(o-n,0),SetStyle(e,{top:o+"px",clip:"rect(0,auto,"+(t+=n)+"px,0)"}),o&&oSym.addTask(10,arguments.callee,[e,o,t,n])},[t.EleBody,n=t.height,0,.1*n])},o)},SetZombie:function(e,o,t,n){for(var i,a=[],l=[],r=a.length,d=[],u=[],s=n.length,c=o-e+1;--r;)2==a[r]&&l.push(r);for(i=l.length,r=t;r--;)u[r]=(d[r]=new(n[Math.floor(Math.random()*s)])).CustomBirth(l[Math.floor(Math.random()*i)],Math.floor(e+Math.random()*c));this.AppearUP1(u,d,t)},AppearUP1:function(e,o,t){oP.NumZombies+=t,asyncInnerHTML(e.join(""),function(e,o){EDPZ.appendChild(e);for(var t,n,i=o.length;i--;)(t=o[i]).Birth.call(t),SetBlock(t.Ele),oSym.addTask(10,function(e,o,t,n){o=Math.max(o-n,0),SetStyle(e,{top:o+"px",clip:"rect(0,auto,"+(t+=n)+"px,0)"}),o&&oSym.addTask(10,arguments.callee,[e,o,t,n])},[t.EleBody,n=t.height,0,.1*n])},o)},SetTimeoutZombie:function(e,o){for(var t=[],n=[],i=0,a=0,l=e.length;i<l;)n[i]=(t[i]=new e[i]).prepareBirth(a),a+=o,++i;asyncInnerHTML(n.join(""),function(e,o){EDPZ.appendChild(e);for(var t=o.length;t--;)o[t].Birth()},t)},FlagPrgs:function(){var e,o=oP,t=o.FlagZombies,n=o.FlagToSumNum,i=139-t*o.FlagHeadStep,a=$SSml(t,n.a1,n.a2);o.FlagNum>(t=++o.FlagZombies)?($("imgFlagHead").style.left=i+"px",$("imgFlagMeterFull").style.clip="rect(0,157px,21px,"+(i+11)+"px)",(e=$SEql(t,o.FlagToMonitor))&&oSym.addTask(1690,function(e){!e[1]&&(e[0](),e[1]=1)},[e]),oSym.addTask(1990,function(e){var o=oP;o.ReadyFlag==e++&&(o.ReadyFlag=e,o.FlagPrgs())},[t])):($("imgFlagHead").style.left="-1px",$("imgFlagMeterFull").style.clip="rect(0,157px,21px,0)"),o.SelectFlagZombie.call(o,a,t),o.UserDefinedFlagFunc&&o.UserDefinedFlagFunc()},Monitor:function(e,o){e&&e.f.apply(e.f,e.ar),oP.UserDefinedFlagFunc=o||null,function(){oZ.traversalOf(),oSym.addTask(10,arguments.callee,[])}()}},oGd={Init:function(){this.$=[],this.$Crater=[],this.$Tombstones={},this.$Torch=[],this.$Plantern=[],this.$LF=oS.LF,this.$ZF=oS.ZF,this.$Ice=[],this.$JackinTheBox=0,this.$Balloon=new Array(oS.R+1),this.$Fog=[]},add:function(e,o,t,n){(t=(n=this.$)[o])&&t.Die(),n[o]=e},del:function(e){delete this.$[e.R+"_"+e.C+"_"+e.PKind]},MakeFog:function(){var e,o="",t=tx=ri=cj=0,n=oGd.$Fog,i=2*oS.HaveFog+3,a=function(e){var n=$User.Browser.IE&&!$User.Browser.IE9;o+='<img id="'+e+'" src="images/interface/fog'+Math.floor(4*Math.random())+"."+(n?"gif":"png")+'" style="left:'+t+"px;top:"+tx+'px">'};for(ri=1,tx=0;ri<7;t=0,ri++){for(ci=0;ci<=i;ci++)a(n[e=ri+"_"+ci]="Fog"+e),t+=35;tx+=90}NewEle("dFog","div","",{innerHTML:o},EDAll)},MoveFogLeft:function(e){!function(e,o,t,n){(o-=50)>t?(e.style.left=o+"px",oSym.addTask(5,arguments.callee,[e,o,t,n])):(e.style.left=t+"px",n&&n())}($("dFog"),900,GetX(oS.C-oS.HaveFog)-30,e)},MoveFogRight:function(){null!=arguments.callee.caller.caller&&function(e,o){(o+=50)<901?(e.style.left=o+"px",oSym.addTask(5,arguments.callee,[e,o])):e.style.left="900px"}($("dFog"),GetX(oS.C-oS.HaveFog)-3)},GatherFog:function(e,o,t,n,i){var a,l,r,d=e-t,u=e+t,s=o-n,c=o+n,p=[SetNone,SetBlock][i],S=oS.C,f=oS.R,h=S+1,m=2*oS.HaveFog,g=[],y=function(e){return 2*(e-S)+m},v=function(e){return 2*(e-S)+m-2};if(d>0){a=v(s>0?s+1:1),l=y(c>h?h:c-1);do{a>-1&&g.push("Fog"+d+"_"+a)}while(a++<l)}if(u<=f){a=v(s>0?s+1:1),l=y(c>h?h:c-1);do{a>-1&&g.push("Fog"+u+"_"+a)}while(a++<l)}++d,--u,a=v(s<1?1:s),l=y(c>h?h:c),r=a;do{do{a>-1&&g.push("Fog"+d+"_"+a)}while(a++<=l);a=r}while(d++<u);for(a=0;a<g.length;p($(g[a])),a++);if(i){var P,A=oGd.$Torch;for(r in A)P=$P[A[r]],this.GatherFog(P.R,P.C,1,1,0)}}},oZ={Init:function(e){this.$=[],this.$R=[];var o;for(o=e;o;this.$[o]=[],this.$R[o--]=[]);},add:function(e,o){(o=oZ.$[e.R]).push(e),o.sort(function(e,o){return e.AttackedLX-o.AttackedLX}),o.RefreshTime=oSym.Now},getZ0:function(e,o){if(!(o<1||o>oS.R))for(var t,n=0,i=this.$[o],a=i.length;n<a&&(t=i[n++]).AttackedLX<=e;)if(t.PZ&&t.HP&&t.AttackedRX>=e)return t},getZ1:function(e,o){if(!(o<1||o>oS.R)){var t,n,i,a,l=0,r=this.$[o],d=this.$R[o];for((i=r.RefreshTime)==d.RefreshTime?t=d:(t=(this.$R[o]=r.slice(0)).sort(function(e,o){return o.AttackedRX-e.AttackedRX})).RefreshTime=i,a=t.length;l<a&&(n=t[l++]).AttackedRX>=e;)if(n.PZ&&n.HP&&n.AttackedLX<=e)return n}},getArZ:function(e,o,t){for(var n,i,a=0,l=this.$[t],r=[],d=0,u=l.length;a<u&&(i=(n=l[a++]).AttackedLX)<o;)n.PZ&&n.HP&&(i>e||n.AttackedRX>e)&&(r[d++]=n);return r},getRangeLeftZ:function(e,o,t){if(!(t<1||t>oS.R))for(var n,i,a=0,l=this.$[t],r=l.length;a<r&&(i=(n=l[a++]).AttackedLX)<o;)if(n.PZ&&n.HP&&(i>e||n.AttackedRX>e))return n},moveTo:function(e,t,n){for(var i=this.$[t],a=this.$[n],l=i.length;l--;)(o=i[l]).id==e&&(i.splice(l,1),o.R=n,a.push(o),a.sort(function(e,o){return e.AttackedLX-o.AttackedLX}).RefreshTime=i.RefreshTime=oSym.Now,l=0)},traversalOf:function(){var e,o,t,n=this.$,i=0,a=0,l=1e3,r=[function(e){a=1,l=t},function(e){(t=e.AttackedLX)>l&&(i=a=1),l=t}];n.length;!function(t){for(var l=(o=n[t]).length,d=arguments.callee,u=oT.$[t],s=oT.$L[t];l--;)(e=o[l]).HP&&e.PZ&&e.ZX<901&&oT["chkD"+e.WalkDirection](e,t,u,s),e.HP?r[e.ChkActs(e,t,o,l)](e):(o.splice(l,1),r[0](e));i?(i=a=0,o.sort(function(e,o){return e.AttackedLX-o.AttackedLX}),o.RefreshTime=oSym.Now):a&&(a=0,o.RefreshTime=oSym.Now),--t&&oSym.addTask(0,d,[t])}(n.length-1)}},oT={Init:function(e){this.$=[],this.$L=[];for(var o=e;o;)this.$[o]=[],this.$L[o--]=[]},add:function(e,o,t){if(!(e<=0||e>oS.R)){for(var n,i=this.$[e],a=o.length;a--;)n=o[a],i.push([n[0],n[1],n[2],t]);i.sort(function(e,o){return o[1]-e[1]}),i.RefreshTime=new Date}},chkD0:function(e,o,t,n){for(var i,a,l=e.AttackedLX,r=0;r<t.length&&(i=t[r])[1]>=l;)(a=$P[i[3]]).canTrigger&&i[0]<=l&&a.TriggerCheck(e,i[2],r),++r},chkD1:function(e,o,t,n){e.AttackedLX;var i,a,l,r,d=e.AttackedRX,u=0;for((a=t.RefreshTime)==n.RefreshTime?i=n:(i=(this.$L[o]=t.slice(0)).sort(function(e,o){return e[0]-o[0]})).RefreshTime=a;u<i.length&&(l=i[u])[0]<=d;)(r=$P[l[3]]).canTrigger&&l[1]>=d&&r.TriggerCheck(e,l[2],u),++u},delP:function(e){var o,t,n,i=e.oTrigger,a=e.id;for(o in i){for(n=(t=this.$[o]).length;n--;t[n][3]==a&&t.splice(n,1));t.RefreshTime=new Date}},indexOf:function(e,o){for(var t=new RegExp(o+",","g"),n=(e.toString()+",").replace(t,"┢,").replace(/[^,┢]/g,""),i=0,a=0,l=[];(a=n.indexOf("┢",a))>0;l.push((a++-i++-2)/3));return l}},asyncInnerHTML=function(e,o,t){var n=$n("div"),i=document.createDocumentFragment();n.innerHTML=e,function(e){var a=arguments.callee;e--?(i.appendChild(n.firstChild),setTimeout(function(){a(e)},0)):o(i,t)}(n.childNodes.length)},WhichMouseButton=function(e){e=window.event||e;var o=$User.Browser;return o.Gecko?$SEql(e.which,{1:1,3:2,default:1}):$SEql(e.button,{1:1,0:o.IE?2:1,2:2,default:1})},GroundOnmousedown=function(e){var o=(e=window.event||e).clientX-EDAlloffsetLeft+EBody.scrollLeft||EElement.scrollLeft,t=e.clientY+EBody.scrollTop||EElement.scrollTop,n=ChosePlantX(o),i=ChosePlantY(t),a=n[0],l=i[0],r=i[1],d=n[1],u=GetAP(o,t,r,d);switch(oS.Chose){case 1:WhichMouseButton(e)<2?GrowPlant(u[0],a,l,r,d):(PlayAudio("tap"),CancelPlant());break;case-1:WhichMouseButton(e)<2?(PlayAudio("plant2"),ShovelPlant(u)):(PlayAudio("tap"),CancelShovel())}},GetAP=function(e,o,t,n){var i,a,l,r=oGd.$,d=[];for(i=0;i<4;d.push(a=r[t+"_"+n+"_"+i++]),a&&!(e<a.pixelLeft||e>a.pixelRight||o<a.pixelTop||o>a.pixelBottom)&&(l=a));return[d,l]},GroundOnkeydown=function(e){var o;if(27==(o=(e||event).keyCode)){switch(oS.Chose){case 1:CancelPlant();break;case-1:CancelShovel()}return!1}!oS.Chose&&KeyBoardGrowPlant(o)},KeyBoardGrowPlant=function(e,o){if(o=o||0,e>47&&e<58)switch(o){case 0:ChosePlant({clientX:450,clientY:300},String.fromCharCode(e))}},GroundOnmousemove=function(){},GroundOnmousemove1=function(e){var o=(e=window.event||e).clientX-EDAlloffsetLeft+EBody.scrollLeft||EElement.scrollLeft,t=e.clientY+EBody.scrollTop||EElement.scrollTop,n=oS.ChoseCard,i=ChosePlantX(o),a=ChosePlantY(t),l=i[0],r=a[0],d=a[1],u=i[1],s=GetAP(o,t,d,u),c=ArCard[n].PName.prototype;SetStyle($("MovePlant"),{left:o-.5*(c.beAttackedPointL+c.beAttackedPointR)+"px",top:t+20-c.height+"px"}),c.CanGrow(s[0],d,u)?SetStyle($("MovePlantAlpha"),{visibility:"visible",left:l+c.GetDX()+"px",top:r-c.height+c.GetDY(d,u,s[0])+"px"}):SetHidden($("MovePlantAlpha"))},GroundOnmousemove2=function(e){var o=(e=window.event||e).clientX-EDAlloffsetLeft+EBody.scrollLeft||EElement.scrollLeft,t=e.clientY+EBody.scrollTop||EElement.scrollTop,n=(oS.ChoseCard,ChosePlantX(o)),i=ChosePlantY(t),a=(n[0],i[0],i[1]),l=n[1],r=GetAP(o,t,a,l)[1],d=r?r.id:"",u=oS.MPID;u!=d&&(u&&SetAlpha($(u).childNodes[1],100,1),(oS.MPID=d)&&SetAlpha($(d).childNodes[1],60,.6)),SetStyle($("tShovel"),{left:o-15+"px",top:t-16+"px"})},DisplayZombie=function(){SetVisible($("bShowHandBook"));for(var e,o,t,n=oP.AZ.slice(0),i=n.length,a=$("dZombie"),l=[],r=[];i--;)0==n[i][0].prototype.CanDiaplay&&n.splice(i,1);for(e=i=n.length;e--;)l.push(Math.floor(150+444*Math.random()));for(l.sort(function(e,o){return e-o});i;)(o=n[t=Math.floor(Math.random()*i)][0].prototype).CanDisplay?(n.splice(t,1),r[i--]=o.getHTML("",Math.floor(50+201*Math.random())-.5*o.width,l[i]-o.height,1,"block","auto",o.GetDTop,o.PicArr[o.StandGif])):--i;asyncInnerHTML(r.join(""),function(e){a.appendChild(e)})},AutoSelectCard=function(){for(var e=oS.ArCard,o=-1,t=e.length;++o<t;)SelectCard(e[o].prototype.EName)},InitPCard=function(){for(var e,o,t="",n=oS.ArCard,i=n.length,a=0;a<i;)(o=(e=n[a]).prototype).CanSelect?(ArPCard[EName=o.EName]={Select:0,PName:e},t+='<div class="span1" id="Card'+EName+'" onmouseout="SetHidden($(\'dTitle\'))" onmousemove="ViewCardTitle('+EName+',event)" onclick="SelectCard(\''+EName+'\')"><img src="'+o.PicArr[0]+'"><span class="span2">'+o.SunNum+"</span></div>",a++%6==5&&(t+="<br>")):++a;$("dPCard").innerHTML=t},InitHandBookPCard=function(){PlayAudio("gravebutton");for(var e,o="",t=[oPeashooter,oSunFlower,oCherryBomb,oWallNut,oPotatoMine,oSnowPea,oChomper,oRepeater,oPuffShroom,oSunShroom,oFumeShroom,oGraveBuster,oHypnoShroom,oScaredyShroom,oIceShroom,oDoomShroom,oLilyPad,oSquash,oThreepeater,oTangleKlep,oJalapeno,oSpikeweed,oTorchwood,oTallNut,oCactus,oPlantern,oSplitPea,oStarfruit,oPumpkinHead,oFlowerPot,oCoffeeBean,oGarlic,oSeaShroom,oOxygen,ostar,oTTS,oGun,oSeaAnemone,oGatlingPea,oGloomShroom,oTwinSunflower,oSpikerock,oTenManNut,oSnowRepeater,oLing,oLotusRoot,oMagneticmuShroom,oLaserBean,oBigChomper,oFlamesMushroom],n=t.length,i=0;i<n;)o+='<div class="span1" onclick="ViewProducePlant('+(e=t[i].prototype).EName+')"><img src="'+e.PicArr[0]+'"><div class="span2">'+e.SunNum+"</div></div>",i++%6==5&&(o+="<br>");$("dHandBookPCard").innerHTML=o,ViewProducePlant(t[0]),$("dHandBookPZ").className="WindowFrame Almanac_PlantBack",SetVisible($("dHandBookPZ")),SetNone($("dHandBookZ")),SetBlock($("dHandBookP"))},InitHandBookZCard=function(){PlayAudio("gravebutton");for(var e,o="",t=[oZombie,oConeheadZombie,oPoleVaultingZombie,oBucketheadZombie,oFlagZombie,oNewspaperZombie,oScreenDoorZombie,oFootballZombie,oHeiFootballZombie,oDancingZombie,oBackupDancer,oDuckyTubeZombie1,oSnorkelZombie,oZomboni,oDolphinRiderZombie,oBalloonZombie,oJackinTheBoxZombie,oImp,oCZombie,oCConeheadZombie,oCBucketheadZombie,oEunZombie,othugZombie,oZZ,oEmperor,oCXZombie,oXBZombie,oJX,oJY,oLGBOSS,oWarshipsZombie,oSubZombie,oWJY,oMustacheZombie,oTrashZombie,oLionDanceZombie],n=t.length,i=0;i<n;)o+='<div class="span1" onclick="ViewProduceZombie('+(e=t[i].prototype).EName+')"><img src="'+e.PicArr[0]+'"><div class="span2">'+e.SunNum+"</div></div>",i++;$("dHandBookZCard").innerHTML=o,ViewProduceZombie(t[0]),$("dHandBookPZ").className="WindowFrame Almanac_ZombieBack",SetVisible($("dHandBookPZ")),SetNone($("dHandBookP")),SetBlock($("dHandBookZ"))},ViewProducePlant=function(e){PlayAudio("plant1");var o=e.prototype;$("pHandBookPlant").style.backgroundImage="url("+o.PicArr[o.StaticGif]+")",$("dProducePlant").innerHTML=o.Produce,innerText($("dHandBookPlantName"),o.CName),innerText($("spSunNum"),o.SunNum),innerText($("spCoolTime"),o.coolTime+"秒"),$("pPlantBack").style.backgroundPosition=-200*o.BookHandBack+"px 0"},ViewProduceZombie=function(e){PlayAudio("plant1");var o=e.prototype;$("pHandBookZombie").style.background="url("+o.PicArr[o.StaticGif]+") no-repeat scroll "+o.BookHandPosition,$("dProduceZombie").innerHTML=o.Produce,innerText($("dHandBookZombieName"),o.CName),$("pZombieBack").style.backgroundPosition=-200*o.BookHandBack+"px 0"},ViewCardTitle=function(e,o){o=o||window.event;var t=$("dTitle"),n=e.prototype;t.innerHTML=n.CName+"<br>冷却时间:"+n.coolTime+"秒<br>"+(oS.DKind&&n.night?'<span style="color:#F00">夜行性的--在白天会睡觉</span><br>'+n.Tooltip:n.Tooltip||'<span style="text-align:left">'+n.Produce+"</span>"),SetStyle(t,{left:o.clientX+(EBody.scrollLeft||EElement.scrollLeft)-3+"px",top:o.clientY+18+EBody.scrollTop||EElement.scrollTop+"px",visibility:"visible"})},SelectCard=function(e){PlayAudio("tap");var o,t=$("Card"+e).childNodes[0],n=ArPCard[e],i=n.PName.prototype,a=$("btnOK");if(n.Select)n.Select=0,!--ArPCard.SelNum&&(a.disabled="disabled",a.style.color="#888"),(o=$("dCard"+e)).onclick=null,ClearChild(o.firstChild,o.childNodes[1],o.lastChild,o),t.style.top=0;else{if(ArPCard.SelNum|=0){if(ArPCard.SelNum>9)return}else a.disabled="",a.style.color="#FC6";++ArPCard.SelNum,n.Select=1,oS.StaticCard&&(o=NewEle("dCard"+e,"div","",{onclick:function(){SelectCard(e)}},$("dCardList")),NewImg(0,t.src,"width:100px;height:120px",o),innerText(NewEle("sSunNum"+e,"span",0,0,o),i.SunNum),t.style.top="-42px")}},ResetSelectCard=function(){var e,o=$("btnOK");for(e in ArPCard)ArPCard[e].Select&&SelectCard(e);o.disabled="disalbed",o.style.color="#888"},LetsGO=function(){var e,o,t,n,i,a=$("dCardList"),l=0,r=a.childNodes.length,d=document.body;for(SetStyle($("dTop"),{left:"105px",top:0}),a.style.left=0,SetVisible(a);l<r;)!function(l){e=(n=a.childNodes[l]).id.substr(5),t=(o=ArPCard[e].PName).prototype,n.onclick=function(e){ChosePlant(e,l)},n.onmouseover=function(){SetVisible($("dTitle")),ViewPlantTitle(oS.MCID=l)},n.onmouseout=function(){SetHidden($("dTitle"))},n.firstChild.style.top="-60px",(i=n.lastChild).id="sSunNum"+l,innerText(i,t.SunNum),ArCard.push({DID:n.id,CDReady:0,SunReady:0,PName:o})}(l++);d.onkeydown=function(e){GroundOnkeydown(e)},d.onmousedown=function(e){GroundOnmousedown(e)},d.onmousemove=function(e){GroundOnmousemove(e)},SetVisible(a),!oS.BrainsNum&&CustomSpecial(oBrains,oS.R-1,-2),(oS.StartGame||function(){StopMusic(),PlayMusic(oS.LoadMusic=oS.StartGameMusic),NewMusic(oS.LoadMusic=oS.StartGameMusic),SetVisible($("tdShovel"),$("dFlagMeter"),$("dTop")),oS.InitLawnMower(),PrepareGrowPlants(function(){oP.Monitor(oS.Monitor,oS.UserDefinedFlagFunc),BeginCool(),oS.DKind&&AutoProduceSun(50),oSym.addTask(1500,function(){oP.AddZombiesFlag(),SetVisible($("dFlagMeterContent"))},[])})})(),oS.StartTime=oSym.Now},ViewPlantTitle=function(e){var o=$("dTitle"),t=ArCard[e],n=t.PName.prototype,i=n.CName;!oS.CardKind&&(i+="<br>冷却时间:"+n.coolTime+"秒<br>"+n.Tooltip,!t.CDReady&&(i+='<br><span style="color:#F00">正在重新装填中...</span>')),!t.SunReady&&(i+='<br><span style="color:#F00">阳光不足!</span>'),o.innerHTML=i,SetStyle(o,{top:60*e+"px",left:EDAlloffsetLeft+100+"px"})},BeginCool=function(){for(var e,o,t,n,i=ArCard.length;i--;)switch(t=(e=(o=ArCard[i]).PName.prototype).coolTime,n=e.SunNum,t){case 0:case 7.5:o.CDReady=1,n<=oS.SunNum&&(o.SunReady=1,$(o.DID).childNodes[0].style.top="0");break;case 30:DoCoolTimer(i,20);break;default:DoCoolTimer(i,35)}},ImmediatelyCool=function(){for(var e,o,t=ArCard.length;t--;)(e=(o=ArCard[t]).PName.prototype).coolTime,e.SunNum,o.CDReady=1,o.SunReady=1,$(o.DID).childNodes[0].style.top=0},MonitorCard=function(e){var o=ArCard.length,t=Number(ESSunNum.innerHTML);if(t!=oS.SunNum&&(oS.SunNum=Math.min(t,oS.SunNum)),oS.Chose<1)for(;o--;)(e=ArCard[o]).PName.prototype.SunNum>oS.SunNum?(e.SunReady&&(e.SunReady=0),$(e.DID).childNodes[0].style.top="-60px"):(!e.SunReady&&(e.SunReady=1),e.CDReady&&($(e.DID).childNodes[0].style.top=0));else for(;o--;)(e=ArCard[o]).PName.prototype.SunNum>oS.SunNum?e.SunReady&&(e.SunReady=0):!e.SunReady&&(e.SunReady=1);ViewPlantTitle(oS.MCID)},DoCoolTimer=function(e,o){var t=$(ArCard[e].DID);NewEle("dCD1"+e,"span","position:absolute;left:22px;top:22px;font-size:18px;font-weight:500;font-family:Verdana;color:#000","",t),NewEle("dCD2"+e,"span","position:absolute;left:20px;top:20px;font-size:18px;font-weight:500;font-family:Verdana;color:#FF0","",t),function(e,o){e>0?(innerText($("dCD1"+o),e),innerText($("dCD2"+o),e),oSym.addTask(50,arguments.callee,[(e-.5).toFixed(1),o])):(ClearChild($("dCD1"+o),$("dCD2"+o)),ArCard[o].CDReady=1,MonitorCard())}(o,e)},ChosePlant=function(e,o){CancelShovel(),PlayAudio("seedlift");var t=ArCard[oS.ChoseCard=o];if(t.CDReady&&t.SunReady){var n=(e=window.event||e).clientX-EDAlloffsetLeft+EBody.scrollLeft||EElement.scrollLeft,i=e.clientY+EBody.scrollTop||EElement.scrollTop,a=t.PName.prototype,l=ArCard.length,r=a.PicArr;for(oS.Chose=1,oS.CardKind?(NewImg("MovePlant",a.PicArr[a.StandGif],"left:"+(n-.5*(a.beAttackedPointL+a.beAttackedPointR))+"px;top:"+(i+20-a.height)+"px;z-index:254",EDAll),NewImg("MovePlantAlpha",a.PicArr[a.StandGif],"visibility:hidden;filter:alpha(opacity=40);opacity:0.4;z-index:30",EDAll)):EditImg(NewImg("MovePlant",r[a.StaticGif],"left:"+n-.5*(a.beAttackedPointL+a.beAttackedPointR)+"px;top:"+i+20-a.height+"px;z-index:254",EDAll).cloneNode(!1),"MovePlantAlpha","",{visibility:"hidden",filter:"alpha(opacity=40)",opacity:.4,zIndex:30},EDAll);l--;)$(ArCard[l].DID).childNodes[0].style.top="-60px";SetHidden($("dTitle")),GroundOnmousemove=GroundOnmousemove1}},CancelPlant=function(){ClearChild($("MovePlant"),$("MovePlantAlpha")),oS.Chose=0,MonitorCard(),GroundOnmousemove=function(){}},ShovelPlant=function(e){PlayAudio("plant2");var o=e[0],t=e[1];switch(t.EName){case"oGarlicss":case"oshitou":case"oSpikeweeden":case"oshitou":case"oshitou0":case"oshitou2":case"oshitou1":case"oshitou3":case"oFlowerPotAir1":case"oFlowerPotAir2":case"oFlowerPotAir3":case"oFlowerPotAir4":case"oFlowerPotAir5":case"oFlowerPotAir6":case"oAirZ":CancelShovel();break;default:t&&(t.PKind||!(o[1]||o[2]))&&(t.Die(),oS.MPID=""),CancelShovel()}},ChoseShovel=function(e){PlayAudio("shovel"),WhichMouseButton(e)<2&&(SetHidden($("imgShovel")),NewImg("tShovel","images/interface/Shovel/0.gif","left:"+(e.clientX-10)+"px;top:"+(e.clientY+document.body.scrollTop-17)+"px;z-index:1",EDAll),oS.Chose=-1,GroundOnmousemove=GroundOnmousemove2,StopBubble(e))},CancelShovel=function(e){var o=oS.MPID;ClearChild($("tShovel")),oS.Chose=0,SetVisible($("imgShovel")),o&&SetAlpha($(o).childNodes[1],100,1),GroundOnmousemove=function(){}},StopBubble=function(e){window.event?event.cancelBubble=!0:e.stopPropagation()},GrowPlant=function(e,o,t,n,i){var a,l=oS.ChoseCard,r=ArCard[l],d=r.PName,u=d.prototype,s=u.coolTime,c=oGd.$LF[n];u.CanGrow(e,n,i)&&(PlayAudio(2!=c?"plant"+Math.floor(1+2*Math.random()):"plant_water"),oS.CardKind?asyncInnerHTML((a=new d).CustomBirth(n,i,0,"auto"),function(e,o){EDPZ.appendChild(e),o.Birth()},a):(new d).Birth(o,t,n,i,e),innerText(ESSunNum,oS.SunNum-=u.SunNum),s&&(r.CDReady=0,DoCoolTimer(l,u.coolTime)),oSym.addTask(20,SetHidden,[SetStyle($(2!=c?"imgGrowSoil":"imgGrowSpray"),{left:o-30+"px",top:t-30+"px",zIndex:3*n+1,visibility:"visible"})])),CancelPlant()},AutoProduceSun=function(e){AppearSun(GetX(Math.floor(1+Math.random()*oS.C)),GetY(Math.floor(1+Math.random()*oS.R)),e,1),oSym.addTask(100*Math.floor(9+3*Math.random()),AutoProduceSun,[e])},AppearSun=function(e,o,t,n){var i,a,l="Sun"+Math.random(),r="cursor:pointer;z-index:25;filter:alpha(opacity=80);opacity:0.8;left:"+e+"px;";switch(t){case 25:r+="width:78px;height:78px",i=39;break;case 15:r+="width:46px;height:46px",i=23;break;default:r+="width:100px;height:100px",i=55}n?(a=0,oSym.addTask(10,MoveDropSun,[l,o])):(a=o-i-20,r+=";top:"+a+"px",oSym.addTask(1,function(e,o,t,n,i,a,l,r){ArSun[e]&&ArSun[e].C&&(SetStyle($(e),{left:(o+=n*a)+"px",top:(t+=Number(i[0]))+"px"}),i.shift(),--l>0&&(0==i.length&&(i=[8,16,24,32]),oSym.addTask(r,arguments.callee,[e,o,t,n,i,a,l,++r])))},[l,e,a,Math.floor(4*Math.random()),[-32,-24,-16,-8],[-1,1][Math.floor(2*Math.random())],8,2]),oSym.addTask(800,DisappearSun,[l],3)),ArSun[l]={id:l,N:t,C:1,left:e,top:a},NewImg(l,"images/interface/Sun.gif",r,EDAll,{onclick:function(){ClickSun(this.id)}}),oS.AutoSun&&oSym.addTask(100,ClickSun,[l])},MoveDropSun=function(e,o){var t=ArSun[e];t&&t.C&&(t.top<o-53?($(e).style.top=(t.top+=3)+"px",oSym.addTask(5,MoveDropSun,[e,o])):oSym.addTask(800,DisappearSun,[e]))},DisappearSun=function(e){var o=ArSun[e];o&&o.C&&(delete ArSun[e],ClearChild($(e)))},ClickSun=function(e){PlayAudio("points");var o=ArSun[e];o&&o.C&&(o.C=0,oSym.addTask(0,MoveClickSun,[e]))},MoveClickSun=function(e){var o=ArSun[e],t=o.left,n=o.top;!function(e,o,t,n,i,a,l,r,d){(i-=r)>t?(SetStyle($(e),{left:i+"px",top:(a-=d)+"px"}),oSym.addTask(l,arguments.callee,[e,o,t,n,i,a,l+=.3,r,d])):(SetStyle($(e),{left:t+"px",top:n+"px"}),Number(ESSunNum.innerHTML)!=oS.SunNum&&(oS.SunNum=Math.min(Number(ESSunNum.innerHTML),oS.SunNum)),innerText(ESSunNum,oS.SunNum=Math.min(oS.SunNum+o.N,9990)),MonitorCard(),delete ArSun[e],oSym.addTask(20,ClearChild,[$(e)]))}(e,o,85,-20,t,n,1,Math.round((t-85)/15),Math.round((n- -20)/15))},AutoClickSun=function(){var e;for(e in ArSun)ArSun[e].C&&ClickSun(e)},ShowLargeWave=function(e){PlayAudio("hugewave"),NewImg("LargeWave","images/interface/LargeWave.gif","left:71px;top:249px;width:400px;height:200px;z-index:50",EDAll),oSym.addTask(4,function(e,o,t){SetStyle($("LargeWave"),{width:(e-=57.2)+"px",height:(o-=6.8)+"px",left:500-.5*e+"px",top:300-.5*o+"px"}),e>286?oSym.addTask(4,arguments.callee,[e,o,t]):(oSym.addTask(460,function(){ClearChild($("LargeWave"))},[]),t&&t())},[858,102,e])},ShowFinalWave=function(){var e=function(e){PlayAudio("finalwave"),"Ultimate battle"==oS.StartGameMusic?(StopMusic(),PlayMusic(oS.LoadMusic="Ultimate battlel"),NewMusic(oS.LoadMusic="Ultimate battlel")):"Hellow"==oS.StartGameMusic&&(StopMusic(),PlayMusic(oS.LoadMusic="Hellow2"),NewMusic(oS.LoadMusic="Hellow2")),NewImg("FinalWave","images/interface/FinalWave.gif","left:122px;top:194px;width:756px;height:213px;z-index:50",EDAll),oSym.addTask(4,function(e,o,t){SetStyle($("FinalWave"),{width:(e-=50.4)+"px",height:(o-=14.2)+"px",left:500-.5*e+"px",top:300-.5*o+"px"}),e>252?oSym.addTask(4,arguments.callee,[e,o,t]):oSym.addTask(t,function(){ClearChild($("FinalWave"))},[])},[756,213,e])};oP.FlagNum in oS.LargeWaveFlag?ShowLargeWave(function(){oSym.addTask(560,e,[150])}):e(500)},ShowFinalWavedjt=function(){var e=function(e){PlayAudio("finalwave"),"djt"==oS.StartGameMusic&&(StopMusic(),PlayMusic(oS.LoadMusic="djtlw"),NewMusic(oS.LoadMusic="djtlw")),NewImg("FinalWave","images/interface/FinalWave.gif","left:122px;top:194px;width:756px;height:213px;z-index:50",EDAll),oSym.addTask(4,function(e,o,t){SetStyle($("FinalWave"),{width:(e-=50.4)+"px",height:(o-=14.2)+"px",left:500-.5*e+"px",top:300-.5*o+"px"}),e>252?oSym.addTask(4,arguments.callee,[e,o,t]):oSym.addTask(t,function(){ClearChild($("FinalWave"))},[])},[756,213,e])};oP.FlagNum in oS.LargeWaveFlag?ShowLargeWave(function(){oSym.addTask(560,e,[150])}):e(500)},ShowFinalWaveday=function(){var e=function(e){PlayAudio("finalwave"),StopMusic(),PlayMusic(oS.LoadMusic="uraniwanif"),NewMusic(oS.LoadMusic="uraniwanif"),NewImg("FinalWave","images/interface/FinalWave.gif","left:122px;top:194px;width:756px;height:213px;z-index:50",EDAll),oSym.addTask(4,function(e,o,t){SetStyle($("FinalWave"),{width:(e-=50.4)+"px",height:(o-=14.2)+"px",left:500-.5*e+"px",top:300-.5*o+"px"}),e>252?oSym.addTask(4,arguments.callee,[e,o,t]):oSym.addTask(t,function(){ClearChild($("FinalWave"))},[])},[756,213,e])};oP.FlagNum in oS.LargeWaveFlag?ShowLargeWave(function(){oSym.addTask(560,e,[150])}):e(500)},ShowBOSS=function(e){PlayAudio("finalwave"),NewImg("ShowBOSS","images/interface/BOSSWave.gif","left:71px;top:249px;width:858px;height:102px;z-index:50",EDAll),oSym.addTask(4,function(e,o,t){SetStyle($("LargeWave"),{width:(e-=57.2)+"px",height:(o-=6.8)+"px",left:500-.5*e+"px",top:300-.5*o+"px"}),e>286?oSym.addTask(4,arguments.callee,[e,o,t]):(oSym.addTask(460,function(){ClearChild($("ShowBOSS"))},[]),t&&t())},[858,102,e])},GameOver=function(){PlayAudio("scream"),NewImg("iGameOver","images/interface/ZombiesWon.png","width:900px;height:600px;z-index:255",EDAll,{onclick:function(){SelectModal(oS.Lvl)}}),oSym.Stop()},PrepareGrowPlants=function(e){var o=function(){PlayAudio("readysetplant"),oSym.addTask(60,function(e,o){var t=e.style;t.backgroundPosition="0 -108px",oSym.addTask(40,function(e,o,t){o.backgroundPosition="0 -216px",oSym.addTask(100,function(e,o){ClearChild(e),o()},[e,t])},[e,t,o])},[NewEle(0,"div","position:absolute;overflow:hidden;background:url(images/interface/PrepareGrowPlants.png) no-repeat;width:255px;height:108px;z-index:50;left:"+(.5*oS.W-77)+"px;top:"+(.5*oS.H-54)+"px",0,EDAll),e])};oS.HaveFog?oGd.MoveFogLeft(o):o()},CustomPlants=function(e,o,t){(new ArCard[e].PName).Birth(GetX(t),GetY(o),o,t,[])},CustomSpecial=function(e,o,t,n){(new e).Birth(GetX(t),GetY(o),o,t,[],n)},CheckAutoSun=function(e){var o=e.checked?1:0;o!=oS.AutoSun&&(addCookie("JSPVZAutoSun",oS.AutoSun=o),o&&AutoClickSun())},GetNewCard=function(e,o,t){StopMusic(),PlayAudio("winmusic"),oSym.Clear(),SetStyle(e,{left:"350px",top:"131px",width:"200px",height:"240px",clip:"rect(0,auto,120px,0)",cursor:"default"}).onclick=null,oSym.Init(function(e,n){++e<100?(SetAlpha(n,e,.01*e),oSym.addTask(4,arguments.callee,[e,n])):function(){StopAudio("winmusic"),PlayAudio("plantsgarden",!0),SetHidden(EDAll,$("dTop"));var e=o.prototype;$("iNewPlantCard").src=e.PicArr[e.StaticGif],$("iNewPlantCard").style.marginTop=180-e.height+"px",innerText($("dNewPlantName"),e.CName),$("dNewPlantTooltip").innerHTML=e.Tooltip,$("btnNextLevel").onclick=function(){StopAudio("plantsgarden"),SelectModal(t)},SetStyle($("dNewPlant"),{visibility:"visible",zIndex:255})}()},[0,$("DivA")])},getCookie1=function(e,o){for(var t,n,i,a=document.cookie.split(";"),l=a.length;l--;)if((i=(t=a[l]).split("="))[0].replace(" ","")==e){if(2==(n=i.length))return unescape(i[1]);if(i.shift(),i=i.join("=").split("&"),void 0==o)return unescape(i);for(n=i.length;n--;)if((t=i[n].split("="))[0].replace(" ","")==o)return unescape(t[1])}return 0},getCookie=function(e){var o=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=o?unescape(o[2]):0},addCookie=function(e,o,t){var n=e+"="+escape(o);if(t){var i=new Date;i.setTime(i.getTime+3600*t*1e3),n+=";expire="+i.toGMTString()}document.cookie=n},deleteCookie=function(e){document.cookie=e+"=0;"},WordUTF8='<div id="dLogo" style="position:absolute;width:900px;height:600px;z-index:1"><div id="LogoWord" style="position:absolute;color:#FF0;top:300px;width:100%;height:100px"><span style="position:absolute;width:305px;height:150px;left:285px;top:5px;cursor:pointer" onclick="PlayAudio(\'gravebutton\');SetBlock($(\'dSurface\'),$(\'iSurfaceBackground\'));ShowNameDiv()"></span><div style="position:absolute;font-size:14px;left:660px;text-align:center;width:140px;top:185px;line-height:1.5;font-weight:bold"><span style="cursor:pointer"><span id="" style=""></span></span></div></div><div style="position:absolute;width:74px;height:41px;left:807px;top:502px;cursor:pointer;z-index:300" onclick="SetVisible($(\'dProcess\'))"></div><img src="" style="position:absolute;left:550px;top:-40px"></div>',ShowNameDiv=function(){oSym.Start(),function(e){var o=e[0],t=3;for(e.shift();t--;)SetStyle($("dNameDiv"+t).style.top=o[t]+"px");e.length&&oSym.addTask(o[3],arguments.callee,[e])}([[-260,96,136,10],[-94,96,136,10],[-6,127,176,10],[-8,134,188,17],[-8,130,179,17],[-8,136,189,17],[-8,134,187,10]])},ShowLoginDiv=function(){$User.isAuthorWebsite?PlayAudio("tap"):GotoAuthorWebsite("")},CheckLogin=function(){var e=$("txtName").value,o=$("txtPass").value,t=/^[\u4e00-\u9fa5\w]{3,10}$/,n=/^\w{3,20}$/;return!(!/^\w{3,10}$/.exec(e)&&!t.exec(e)||!n.exec(o))},SelectModal=function(e){HiddenLevel(),HiddenMiniGame(1),HiddenRiddleGame(1),StopMusic(),PausedAudioArr=[],void 0==e&&(e=$User.Visitor.Progress),oS.LvlClearFunc&&oS.LvlClearFunc();var o,t=oS.GlobalVariables,n=oS.LvlVariables,i=oS.SelfVariables,a=window;for(o in t)a[o]=t[o];for(o in n)a[o]=null;for(o=i.length;o--;delete oS[i[o]]);for(o in $Pn)$Pn[o]=null;oS.GlobalVariables={},oS.LvlVariables={},oS.SelfVariables.length=0,SetHidden($("dCardList"),$("tGround"),$("dSelectCard"),$("dTop"),$("dMenu"),$("dHandBook"),$("dNewPlant"),$("dProcess")),SetNone($("dSurface"),$("iSurfaceBackground")),ClearChild($("dFlagMeterTitleB").firstChild),EDAll=$("dBody").replaceChild(EDNewAll,EDAll),$("dBody").replaceChild(EDNewFlagMeter,$("dFlagMeter")),LoadLvl(e)},GotoAuthorWebsite=function(){alert("江南游戏开发社\n官方网址:http://pvzweb.usa3v.net \n官方QQ群:399624322\n官方邮箱:2583727181@qq.com\n感谢您对本游戏的支持！"),alert("现在由Enderexplain开源 \n我的QQ:1509095749\n我也感谢您对本游戏的支持！")},InitGame=function(){NewEle("dServer","div","position:absolute;line-height:28px;left:706px;top:245px;width:700px;height:100px;font-size:16px;color:#040;font-family:黑体;font-weight:bold;z-index:2;display:none",0,$("dAll")),$User.Server.List;var e=$("dProcess");!$("dText1")&&e.insertBefore(NewEle("dText1","div",0,{innerHTML:'<span style="line-height:23px;font-size:15px;font-family:&#x9ED1;&#x4F53;;color:#F60;top:32px">欢迎体验<span style="font-family:Verdana;font-weight:700">新版植物大战僵尸JS</span>,程序是玩家自制,与任何盈利公司无关。<span style="font-family:Verdana;font-weight:700">LonelyStar与江南游戏开发社</span>保留对该程序版权所有,游戏题材、素材、音效归Popcap Games，Electronic Arts所有，个别背景音乐来源免费音乐网站。如您需要转载，请保留以上版权说明，不然视盗版处理。</span>'},0),e.firstChild),LoadLvl()},InitGameEN=function(){NewEle("dServer","div","position:absolute;line-height:28px;left:706px;top:245px;width:700px;height:100px;font-size:16px;color:#040;font-family:黑体;font-weight:bold;z-index:2;display:none",0,$("dAll")),$User.Server.List;var e=$("dProcess");!$("dText1")&&e.insertBefore(NewEle("dText1","div",0,{innerHTML:'<span style="line-height:23px;font-size:15px;font-family:&#x9ED1;&#x4F53;;color:#F60;top:32px">欢迎体验<span style="font-family:Verdana;font-weight:700">新版植物大战僵尸JS</span>,程序是玩家自制,与任何盈利公司无关。<span style="font-family:Verdana;font-weight:700">LonelyStar与江南游戏开发社</span>保留对该程序版权所有,游戏题材、素材、音效归Popcap Games，Electronic Arts所有，个别背景音乐来源免费音乐网站。如您需要转载，请保留以上版权说明，不然视盗版处理。</span>'},0),e.firstChild),LoadLvl(3333333,3333333)},LoadLvl=function(e,o){oSym.Timer&&oSym.Stop();var t=oSym.Now==o;$User.Visitor;oS.CenterContent&&(0==e&&t||0!=e)&&(oS.DisplayAD=!0),e=e||0,$("dServer")&&0!=e&&SetNone($("dServer")),oSym.Init(function(e,o){(o=$("JSPVZ"))&&ClearChild(o),NewEle("JSPVZ","script",0,{src:"level/"+(oS.Lvl=e)+".js",type:"text/javascript"},document.getElementsByTagName("head").item(0))},[e&&t?0:e]),$("aLvlLink").href="html/2-1"+(e&&!isNaN(e)?"-"+e:"")+".htm"},AppearTombstones=function(e,o,t){for(var n,i,a,l,r,d,u,s=oGd.$Tombstones,c=[],p=oS.R+1,S=0,f=oGd.$;--p;)for(l=o;l>=e;)!s[p+"_"+l]&&(c[S++]=[p,l]),--l;for(;t--;){for(s[u=(p=(i=c[l=Math.floor(Math.random()*c.length)])[0])+"_"+(n=i[1])]=1,r=0;r<4;r++)(d=f[u+"_"+r])&&d.Die();c.splice(l,1),a=NewEle("dTombstones"+p+"_"+n,"div","position:absolute;width:86px;height:91px;left:"+(GetX(n)-43)+"px;top:"+(GetY(p)-91)+"px",0,EDAll),p=Math.floor(4*Math.random()),n=Math.floor(2*Math.random());a.appendChild(NewEle("","div","background-position:-"+86*p+"px -"+91*n+"px",{className:"Tom1"},a).cloneNode(!1)).className="Tom2"}},ResetGame=function(e){AllAudioPauseCanceled(),oSym.Start(),innerText(e,"调 速"),$("dMenu1").onclick=ClickMenu,SetNone($("dSurface"),$("dPause")),$("dPauseAD").innerHTML=""},PauseGame=function(e,o){var t=oSym;AllAudioPaused(),t.Stop(),innerText(e,"调 速"),$("dMenu1").onclick=null,!o&&SetBlock($("dSurface"),$("dPause"))},ClickMenu=function(){oSym.Timer&&(AllAudioPaused(),PlayAudio("pause"),oSym.Stop(),SetBlock($("dSurface")),innerText($("dMenu0"),"调 速"),ShowOptions())},OptionsMenuDown=function(e,o){e.className="OptionsMenuButtonDown",o.style.lineHeight="102px"},OptionsMenuUP=function(e,o){e.className="OptionsMenuButton",o.style.lineHeight="100px"},ShowSpeed=function(){oSym.Stop(),PlayAudio("gravebutton"),SetNone($("dOptionsMenuback"),$("dOptionsMenu")),SetBlock($("dSpeedContainer"))},HiddenSpeed=function(){PlayAudio("tap"),SetNone($("dSpeedContainer")),oS.Lvl&&ResetGame($("dMenu0"))},CSpeed=function(e,o,t){$User.Visitor.NowStep=oSym.NowStep=e,$User.Visitor.TimeStep=oSym.TimeStep=o,$("dDisplaySpeed").innerHTML=t},ShowLevel=function(){PlayAudio("gravebutton"),SetNone($("dOptionsMenu")),SetBlock($("dAdvSmallContainer"))},HiddenLevel=function(){PlayAudio("tap"),SetNone($("dOptionsMenuback"),$("dAdvSmallContainer")),oS.Lvl&&(SetNone($("dSurface")),ResetGame($("dMenu0")))},ShowMiniGame=function(){PlayAudio("gravebutton"),SetBlock($("dMiniSmallContainer"))},HiddenMiniGame=function(e){!e&&PlayAudio("tap"),SetNone($("dMiniSmallContainer"))},ShowRiddleGame=function(){PlayAudio("gravebutton"),SetBlock($("dRiddleSmallContainer"))},HiddenRiddleGame=function(e){!e&&PlayAudio("tap"),SetNone($("dRiddleSmallContainer"))},ShowOptions=function(){PlayAudio(oS.Lvl?"gravebutton":"tap"),SetBlock($("dOptionsMenuback"),$("dOptionsMenu"))},HiddenOptions=function(){PlayAudio("gravebutton"),PlayAudio("buttonclick"),SetNone($("dOptionsMenuback"),$("dOptionsMenu")),oS.Lvl&&(SetNone($("dSurface")),ResetGame($("dMenu0")))},ViewHandBook=function(){SetNone($("dOptionsMenuback"),$("dOptionsMenu")),oS.Lvl?(AllAudioPaused(),PlayAudio("gravebutton"),SetNone($("dSurface")),oSym.Stop(),innerText($("dMenu0"),"回到游戏"),$("dMenu1").onclick=null):(AllAudioPaused(),PlayAudio("tap")),PlayAudio("Look up at the Sky"),SetVisible($("dHandBook"))},ReturnHandBookInx=function(){PlayAudio("tap"),SetNone($("dHandBookP"),$("dHandBookZ")),SetHidden($("dHandBookPZ"))},CloseHandBook=function(){PlayAudio("tap"),StopAudio("Look up at the Sky"),oS.Lvl?ResetGame($("dMenu0")):oSym.addTask(100,AllAudioPauseCanceled),SetNone($("dHandBookP"),$("dHandBookZ")),SetHidden($("dHandBookPZ"),$("dHandBook"))},ShowHelp=function(){PlayAudio("tap"),SetBlock($("dHelp"))},HiddenHelp=function(){PlayAudio("tap"),SetNone($("dHelp"))},$=function(e){return document.getElementById(e)},$n=function(e){return document.createElement(e)},ClearChild=function(){for(var e,o=arguments.length;o--;)try{(e=arguments[o]).parentNode.removeChild(e),e=null}catch(e){}},SetBlock=function(){for(var e=arguments.length;e--;)arguments[e].style.display="block"},SetNone=function(){for(var e=arguments.length;e--;)arguments[e].style.display="none"},SetHidden=function(){for(var e=arguments.length;e--;)arguments[e].style.visibility="hidden"},SetVisible=function(){for(var e=arguments.length;e--;)arguments[e].style.visibility="visible"},SetAlpha=$User.Browser.IE6?function(e,o,t){e.style.filter="alpha(opacity="+o+")"}:function(e,o,t){e.style.opacity=t},SetStyle=function(e,o){var t,n=e.style;for(t in o)n[t]=o[t];return e},NewImg=function(e,o,t,n,i){var a=$n("img");if(a.src=o,t&&(a.style.cssText=t),i)for(v in i)a[v]=i[v];return e&&(a.id=e),n&&n.appendChild(a),a},EditImg=function(e,o,t,n,i){return o&&(e.id=o),t&&(e.src=t),n&&SetStyle(e,n),i&&i.appendChild(e),e},NewEle=function(e,o,t,n,i,a,l,r){if(l=$n(o),e&&(l.id=e),t&&(l.style.cssText=t),n)for(r in n)l[r]=n[r];if(a)for(r in a)l.setAttribute(r,a[r]);return i&&i.appendChild(l),l},EditEle=function(e,o,t,n,i,a){if(o)for(a in o)e.setAttribute(a,o[a]);if(t&&SetStyle(e,t),i)for(a in i)e[a]=i[a];return n&&n.appendChild(e),e},NewO=function(e,o){return(o=function(){}).prototype=e,o},SetPrototype=function(e,o,t){t=e.prototype;for(var n in o)t[n]=o[n]},InheritO=function(e,o,t,n,i,a,l,r,d){if((n=function(){}).prototype=new e,o&&SetPrototype(n,o),t){d=n.prototype;for(l in t){i=d[l].slice(0),a=t[l];for(r in a)i[r]=a[r];n.prototype[l]=i}}return n},Compare=function(e,o,t,n,i){return i=e<o?o:e>t?t:e,n?[n(i),i]:[i]},$Switch=function(e,o,t,n,i,a,l){for(a=0,i=o.length,l=t;a<i&&!l(e,o[a]);)++a;return n[a]},$SEql=function(e,o,t){return e in o?o[e]:o.default};$SSml=function(e,o,t){var n=0;for(LX=o.length;n<LX&&!(e<o[n]);)++n;return t[n]},$SGrt=function(e,o,t){var n=0;for(LX=o.length;n<LX&&!(e>o[n]);)++n;return t[n]},ImgSpriter=function(e,o,t,n,i){var a=t[n],l=a[2],r=$(e);r&&(r.style.backgroundPosition=a[0],oSym.addTask(a[1],function(n){n>-1?ImgSpriter(e,o,t,n,i):i(e,o)},[l]))},Ajax=function(){},Date.prototype.format=function(e){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var t in o)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[t]:("00"+o[t]).substr((""+o[t]).length)));return e},NewMusic=$User.HTML5?function(e){NewAudio({autoplay:!0,loop:!0,source:e})}:function(e){!oS.Silence&&($("oEmbed").innerHTML="")},PauseMusic=$User.HTML5?function(){var e=oAudio[oS.LoadMusic];e.currentTime=0,e.pause()}:function(){$("oEmbed").innerHTML=""},StartAdventure=function(e){if(void 0==e||0==e){var o=$("ZombieHand"),t=$("dAdventure"),n=NewImg("","images/interface/mum.gif","",o);t.onclick=t.onmouseover=t.onmouseout=null,SetBlock(o),StopMusic(),PlayAudio("losemusic"),oSym.addTask(450,function(){SetNone(o),PlayAudio("evillaugh")},[]),oSym.addTask(7,function(e,o,t){o.style.left=(t-=330)+"px",--e&&oSym.addTask(7,arguments.callee,[e,o,t])},[6,n,0]),$User.HTML5?function(t,n,i){oAudio.evillaugh;--i?(t.style.backgroundPosition=["top","bottom"][n],oSym.addTask(10,arguments.callee,[t,n?0:1,i])):(t.style.backgroundPosition="top",t.onclick=StartAdventure,t.onmouseover=function(){this.style.backgroundPosition="bottom"},t.onmouseout=function(){this.style.backgroundPosition="top"},StopAudio("evillaugh"),SelectModal(e),o.innerHTML="")}(t,1,50):(NewMusic("evillaugh"),function(t,n,i){--i?(t.style.backgroundPosition=["top","bottom"][n],oSym.addTask(10,arguments.callee,[t,n?0:1,i])):(t.style.backgroundPosition="top",t.onclick=StartAdventure,t.onmouseover=function(){this.style.backgroundPosition="bottom"},t.onmouseout=function(){this.style.backgroundPosition="top"},SelectModal(e),o.innerHTML="")}(t,1,50))}else SelectModal(e)},oAudio={},PausedAudioArr=[],NewAudio=$User.HTML5?function(e){var o=e.source;if(!oAudio[o]){var t,n=document.createElement("audio"),i=e.autoplay,a=e.loop,l={mp3:"audio/mpeg"},r=e.preload,d=e.callback,u=["mp3"],s=u.length;for(n.autoplay=!!i,a&&n.addEventListener("ended",function(){n.play()},!1);s--;)(t=document.createElement("source")).type=l[u[s]],t.src="pvz3a2.net3v.net/audio/"+o+".mp3",n.appendChild(t);return n.preload=void 0==r?"auto":["auto","meta","none"][r],n.muted=oS.Silence,d&&n.addEventListener("canplaythrough",d,!1),oAudio[o]=n}}:function(){},PlayMusic=$User.HTML5?function(e){var o=oAudio[e];if(o){try{o.currentTime=0}catch(e){}o.play()}else NewMusic(e),oAudio[e].play()}:function(e){NewMusic(e)},PlayAudio=$User.HTML5?function(e,o){var t=oAudio[e];t?(t.loop=!!o,t.play()):NewAudio({source:e,loop:!!o}).play()}:function(){},PauseAudio=$User.HTML5?function(e){oAudio[e].pause()}:function(){},StopMusic=$User.HTML5?function(){var e=oAudio[oS.LoadMusic];try{e.currentTime=0}catch(e){}e.pause()}:function(){},StopAudio=$User.HTML5?function(e){var o=oAudio[e];try{o.currentTime=0}catch(e){}o.pause()}:function(){},AllAudioPaused=$User.HTML5?function(){var e,o;for(e in oAudio)!((o=oAudio[e]).paused||o.ended)&&(PausedAudioArr.push(e),o.pause())}:function(){},AllAudioPauseCanceled=$User.HTML5?function(){for(var e=PausedAudioArr.length;e--;)oAudio[PausedAudioArr[e]].play();PausedAudioArr.length=0}:function(){},AllAudioMuted=function(){var e;for(e in oAudio)oAudio[e].muted=!0},AllAudioMuteCanceled=function(){var e;for(e in oAudio)oAudio[e].muted=!1},CheckSilence=$User.HTML5?function(e){var o=e.checked?1:0;o!=oS.Silence&&(addCookie("JSPVZSilence",oS.Silence=o),o?AllAudioMuted():AllAudioMuteCanceled())}:function(e){var o=e.checked?1:0;o!=oS.Silence&&(addCookie("JSPVZSilence",oS.Silence=o),o?PauseMusic():NewMusic(oS.StartGameMusic))};